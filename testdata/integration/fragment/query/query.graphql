query UserOperation {
  user {
    name
    profile {
      ... on PublicProfile {
        status
      }
      ... on PrivateProfile {
        age
      }
    }
    optionalProfile {
      ... on PublicProfile {
        status
      }
      ... on PrivateProfile {
        age
      }
    }
    ...UserFragment1
    ...UserFragment2
    ... on User {
      name
      ...UserFragment2
    }
  }
  optionalUser {
    name
  }
}

fragment UserFragment1 on User {
  name
  name
  ... on User {
    name
  }
  profile {
    ... on PublicProfile {
      status
    }
    ... on PrivateProfile {
      age
    }
  }
}

fragment UserFragment2 on User {
  name
}
